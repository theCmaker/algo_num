\documentclass{report}
\usepackage[utf8]{inputenc} %encodage entrée
\usepackage{endnotes} %notes de fin
\usepackage{graphicx} %images
\usepackage[usenames,dvipsnames]{color} %couleurs
\usepackage{listings} %mise en forme de code source
\usepackage{xfrac}
\renewcommand\theequation{\arabic{equation}}
\usepackage{tabularx} % modifier la taille des cellules des tableaux
\usepackage{upquote}
\usepackage{textcomp}
\usepackage[frenchb]{babel} %langue
\usepackage{amsmath} %affichage des matrices
\usepackage{lipsum} %génération de lipsum
\usepackage{verbatim} %code source
\usepackage{moreverb} %amélioration du package verbatim
\usepackage{titlesec} %formatage des chapitres
\titleformat{\chapter}[hang]{\bf\huge}{\thechapter}{2pc}{}
\usepackage[a4paper]{geometry} %mise en page
\geometry{hscale=0.8,vscale=0.8,centering}
%\lstinputlisting[language=Python, firstline=37, lastline=45]{source_filename.py}
\title{Algorithmes numériques -- Rapport \\ \vspace{0.5cm}Polynôme caractéristique, valeurs propres et vecteurs propres}
\author{Axel Delsol, Pierre-Loup Pissavy}
\date{Janvier 2014}
\lstset{literate=
   {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
   {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
   {à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ò}{{\`u}}1
   {À}{{\`A}}1 {È}{{\`E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ò}{{\`U}}1
   {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
   {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
   {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
   {Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
   {œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
   {ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1
   {€}{{\EUR}}1 {£}{{\pounds}}1
}
\renewcommand{\lstlistingname}{\textsc{Figure}}
\lstdefinestyle{customc}{
   belowcaptionskip=1\baselineskip,
   breaklines=true,
   frame=L,
   xleftmargin=\parindent,
   language=C,
   showstringspaces=false,
   basicstyle=\footnotesize\ttfamily,
   keywordstyle=\bfseries\color{ForestGreen},
   commentstyle=\itshape\color{Plum},
   identifierstyle=\color{NavyBlue},
   stringstyle=\color{Orange},
   numbers=left,
   caption=Code : \lstname,
   captionpos=b,
}
\lstset{
upquote=true,
columns=flexible,
basicstyle=\ttfamily,
}
\lstdefinestyle{apercu}{
   	xleftmargin=2cm,
	xrightmargin=2cm,
	frame=single,
	breaklines=true,
	breakatwhitespace=true,
	breakindent=5pt,
	postbreak=\space,
	captionpos=b,
   	escapeinside={\%*}{*)},
   	showstringspaces=false,
   	caption=Apercu : \lstname,
}

\begin{document}
  \maketitle
  \tableofcontents
  
  \chapter{Préambule}
    \section{Structure du programme}
    Nous avons conçu un programme principal avec menus, présenté sous la forme suivante :
      \begin{lstlisting}[style=apercu, name=Menu Principal]
Menu principal : Polynôme caractéristique, valeurs propres et vecteurs propres

Choisir le mode de saisie de la matrice : 
1- Utiliser le générateur de matrices
2- Entrer manuellement les valeurs
%*\textit{(Saisie des valeurs de la matrice...)}*)

%*\textit{(Affichage de la matrice correspondants...)}*)
Quelle résolution utiliser ?
1- Méthode de Leverrier
2- Méthode de Leverrier améliorée
9- Nouvelle série de points (Menu principal)
0- Quitter
Votre choix :
      \end{lstlisting}
      
      Au lancement, le programme demande la saisie des valeurs, qu'il stocke dans un tableau, puis affiche le menu. Après chaque méthode, il est possible de réutiliser le jeu de données (chaque méthode qui doit modifier les valeurs utilise un duplicata). \\

Le menu principal est codé dans le fichier source \verb"main.c". Les méthodes sont codées dans des fichiers individuels sauf les méthodes de leverrier qui sont réunies. Les prototypes des fonctions sont écrits dans les headers correspondants. 
La liste de tous ces fichiers est présentée figure \ref{arborescence}.\\

Le stockage des valeurs se fait en double précision (type \verb"double", 64 bits) afin d'obtenir des résultats suffisamment précis.\\
De plus, les méthodes de leverrier utilisent une structure de polynôme (composée du degré et des coefficients), présentée figure \ref{structpoly}, pour faciliter la compréhension du code.

\lstinputlisting[style=customc, name=Structure de Polynôme, label=structpoly, firstline=4, lastline=8, firstnumber=4]{polynome.h}
\newpage
\lstinputlisting[style=apercu, name=Arborescence des fichiers \lstinline"C" et \lstinline"makefile", label=arborescence]{arborescence}

    \section{Compilation et logiciels utilisés}
  \chapter{Polynôme caractéristique}
    \section{Méthode de Leverrier}
      \subsection{Présentation}
      
      La méthode de Leverrier permet de déterminer le polynôme caractéristique d'une matrice $A \in M_{n,n}(\Re)$ c'est-à-dire le déterminant $|A-\lambda I_n| = P(\lambda)$ où $I_n$ est la matrice identité. Le but est donc de déterminer les coefficients $a_i$ du polynome $P(\lambda) = a_n + a_{n-1}\lambda + \dots + a_{0}\lambda^n$.\\
      
      Pour les trouver, on définit d'abord $S_p = Tr(A^p)$ puis on applique les identités de Newton l'aide de la formule suivante : \\ \\
      $\forall p \in \{1,\cdots,n\}$, \indent
      $\left\{
      \begin{array}{l }
	a_{0} = (-1)^n \\
	a_{p} = -\frac{{\overset{p-1}{\underset{i=0}{\sum}}} a_{i} \cdot S_{p-1}} {p} \\
	\end{array} \right.$
      \subsection{Programme}
	\lstinputlisting[style=customc, firstline=9,lastline=53, firstnumber=9]{leverrier.c}
    \section{Méthode de Leverrier améliorée}
      \subsection{Présentation}
      \subsection{Programme}
	\lstinputlisting[style=customc, firstline=55,lastline=144, firstnumber=55]{leverrier.c}
    \section{Résultat des tests}

\end{document}