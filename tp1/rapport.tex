\documentclass{report}
\usepackage[utf8]{inputenc} %encodage entrée
\usepackage{endnotes} %notes de fin
\usepackage{graphicx} %images
\usepackage[usenames,dvipsnames]{color} %couleurs
\usepackage{listings} %mise en forme de code source
\usepackage{xfrac}
\renewcommand\theequation{\arabic{equation}}
\usepackage{upquote}
\usepackage{textcomp}
\usepackage[frenchb]{babel} %langue
\usepackage{amsmath} %affichage des matrices
\usepackage{lipsum} %génération de lipsum
\usepackage{verbatim} %code source
\usepackage{moreverb} %amélioration du package verbatim
\usepackage{titlesec} %formatage des chapitres
\titleformat{\chapter}[hang]{\bf\huge}{\thechapter}{2pc}{}
\usepackage[a4paper]{geometry} %mise en page
\geometry{hscale=0.8,vscale=0.8,centering}
%\lstinputlisting[language=Python, firstline=37, lastline=45]{source_filename.py}
\title{Algorithmes numériques -- Rapport \\ \vspace{0.5cm}Résolution de systèmes linéaires}
\author{Axel Delsol, Pierre-Loup Pissavy}
\date{Novembre 2013}
\lstset{literate=
   {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
   {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
   {à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ò}{{\`u}}1
   {À}{{\`A}}1 {È}{{\`E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ò}{{\`U}}1
   {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
   {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
   {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
   {Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
   {œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
   {ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1
   {€}{{\EUR}}1 {£}{{\pounds}}1
}
\lstdefinestyle{customc}{
   belowcaptionskip=1\baselineskip,
   breaklines=true,
   frame=L,
   xleftmargin=\parindent,
   language=C,
   showstringspaces=false,
   basicstyle=\footnotesize\ttfamily,
   keywordstyle=\bfseries\color{ForestGreen},
   commentstyle=\itshape\color{Plum},
   identifierstyle=\color{NavyBlue},
   stringstyle=\color{Orange},
   numbers=left,
   caption=Code : \lstname,
   captionpos=b,
}
\lstset{
upquote=true,
columns=flexible,
basicstyle=\ttfamily,
}
\renewcommand{\lstlistingname}{\textsc{Figure}}
\lstdefinestyle{apercu}{
   	xleftmargin=2cm,
	xrightmargin=2cm,
	frame=single,
	breaklines=true,
	breakatwhitespace=true,
	breakindent=5pt,
	postbreak=\space,
	captionpos=b,
   	escapeinside={\%*}{*)},
   	showstringspaces=false,
   	caption=Apercu : \lstname,
}
\begin{document}
  \maketitle
  \tableofcontents

  \chapter{Préambule}
  	\section{Structure du programme}
    Nous avons choisi de générer un programme principal avec menus, présenté sous la forme suivante :

    \begin{lstlisting}[style=apercu, name=Menu Principal]
MENU PRINCIPAL : RESOLUTION D'EQUATIONS LINEAIRES

1. Résolution par Gauss
3. Résolution par Cholesky
2. Résolution par Jacobi
4. Résolution par Gauss-Seidel
5. Résolution par Surrelaxation
6. Génération de matrices carrées
7. Jeux de test
0. Quitter
Votre choix : 
	\end{lstlisting}
	
	Tous les fonctions de résolution font appel à des fonctions adaptées aux matrices, écrites dans le fichier \verb"matrices.c".
    \vspace{0.3cm}
    
    Chaque méthode de résolution reçoit les matrices (à éléments réels) générées auparavant (juste après le choix de la méthode dans le menu) en arguments.
    \vspace{0.3cm}
    	
	Chaque entrée du menu est codée dans un fichier source qui lui est propre (cf Figure \ref{arborescence}). Les fichiers headers correspondants contiennent les prototypes. Le fichier source \verb"main.c" contient le menu principal.
	\vspace{0.3cm}
	
	Toutes les fonctions de résolution font appel à des fonctions intermédiaires, caractéristiques du calcul matriciel, écrites dans le fichier \verb"matrices.c".
	\vspace{0.3cm}
	
    \lstinputlisting[style=apercu, name=Arborescence, label=arborescence]{arborescence}
    \vspace{0.3cm}

    Les matrices sont générées juste après le choix de la méthode, avant d'être passées en arguments à la fonction de résolution.

	Enfin, la compilation est gérée par un \verb"makefile".  
	\section{Compilation}
	
	\newpage
	\section{Systèmes testés}
	  Les matrices suivantes sont toutes symétriques définies positives à diagonale dominante. Nous avons choisi de prendre 10 systèmes pouvant être résolus par toutes les méthodes pour faciliter la comparaison des méthodes directes, itératives et directes-intermédiaires.
	  \vspace{0.5cm}
	  
	          Systèmes :
        \begin{equation}
        \begin{pmatrix}
		2 & 1 & 0 & 0 \\
		1 & 3 & 1 & 0 \\
		0 & 1 & 5 & 1 \\
		0 & 0 & 1 & 2 \\
        \end{pmatrix}
        \cdot
        \begin{pmatrix}
          x_1 \\
          x_2 \\
          x_3 \\
          x_4 \\
        \end{pmatrix}
        =
        \begin{pmatrix}
		1 \\
		0 \\
		0 \\
		-1 \\
        \end{pmatrix}
        \label{syst1} % plus tard, utiliser \eqref{systX}
        \end{equation}
        \begin{equation}
        \begin{pmatrix}
		19 & 0 & 12 & -6 \\
		0 & 4 & 2 & 1 \\
		12 & 2 & 49 & -4 \\
		-6 & 1 & -4 & 51 \\
        \end{pmatrix}
        \cdot
        \begin{pmatrix}
          x_1 \\
          x_2 \\
          x_3 \\
          x_4 \\
        \end{pmatrix}
        =
        \begin{pmatrix}
		1 \\
		1 \\
		1 \\
		1 \\
        \end{pmatrix}
        \label{syst2}
        \end{equation}
        \begin{equation}
        \begin{pmatrix}
		5 & 1 & 1 & 1 \\
		1 & 13 & 5 & 5 \\
		1 & 5 & 49 & 14 \\
		1 & 5 & 14 & 51 \\
        \end{pmatrix}
        \cdot
        \begin{pmatrix}
          x_1 \\
          x_2 \\
          x_3 \\
          x_4 \\
        \end{pmatrix}
        =
        \begin{pmatrix}
		0 \\
		2 \\
		4 \\
		6 \\
        \end{pmatrix}
        \label{syst3}
        \end{equation}
        \begin{equation}
        \begin{pmatrix}
		1 & 0.5 & 0.25 \\
		0.5 & 1 & 0 \\
		0.25 & 0 & 1 \\
        \end{pmatrix}
        \cdot
        \begin{pmatrix}
          x_1 \\
          x_2 \\
          x_3 \\
        \end{pmatrix}
        =
        \begin{pmatrix}
		1 \\
		2 \\
		1 \\
        \end{pmatrix}
        \label{syst4}
        \end{equation}
        \begin{equation}
        \begin{pmatrix}
		1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
		0 & 9 & 1 & 1 & 1 & 1 & 1 & 1 & 1 & 1 \\
		0 & 1 & 3 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
		0 & 1 & 0 & 8 & 1 & 1 & 1 & 1 & 1 & 1 \\
		0 & 1 & 0 & 1 & 4 & 0 & 0 & 0 & 0 & 0 \\
		0 & 1 & 0 & 1 & 0 & 7 & 1 & 1 & 1 & 1 \\
		0 & 1 & 0 & 1 & 0 & 1 & 4 & 0 & 0 & 0 \\
		0 & 1 & 0 & 1 & 0 & 1 & 0 & 6 & 1 & 1 \\
		0 & 1 & 0 & 1 & 0 & 1 & 0 & 1 & 5 & 0 \\
		0 & 1 & 0 & 1 & 0 & 1 & 0 & 1 & 0 & 5 \\
        \end{pmatrix}
        \cdot
        \begin{pmatrix}
          x_1 \\
          x_2 \\
          x_3 \\
          x_4 \\
          x_5 \\
          x_6 \\
          x_7 \\
          x_8 \\
          x_9 \\
          x_{10} \\
        \end{pmatrix}
        =
        \begin{pmatrix}
		1 \\
		2 \\
		3 \\
		4 \\
		5 \\
		6 \\
		7 \\
		8 \\
		9 \\
		10 \\
        \end{pmatrix}
        \label{syst5}
        \end{equation}

	  
  \chapter{Méthodes directes}
    Les méthodes directes ont pour but d'obtenir des solutions exactes en simplifiant, étape par étape, le système donné sous la forme 
    $A_{n,n} \cdot X_{n,1} = B_{n,1}$ où :
    \begin{itemize}
     \item{$A$ est une matrice donnée}
     \item{$X$ est le vecteur solution}
     \item{$B$ est un vecteur colonne donné}
    \end{itemize}
	\vspace{0.3cm}    
    La résolution se fait en 2 étapes :
    \begin{enumerate}
     \item{On décompose la matrice $A_{n,n}$ tel que $A = M \cdot N$ où $M_{n,n}$ est facile à inverser et $N_{n,n}$ est triangulaire.}
     \item{On résout les systèmes suivants : 
           \begin{itemize}
            \item{On trouve $Y_{n,1}$ tel que $M \cdot Y = B$}
            \item{On trouve enfin $X_{n,1} $ tel quel $N \cdot X = Y$}
           \end{itemize}
           }
    \end{enumerate}
    \section{Méthode de Gauss}
      La méthode de Gauss permet de calculer une solution exacte en un nombre fini d'étapes.
      \newline
      On cherche la matrice $N$ triangulaire supérieure telle que $A = M \cdot N$ avec $M$ la matrice identité.
      \newline
      Remarque : La résolution du système $M \cdot Y = B$ est évidente puisque la matrice $M$ est la matrice identité.
      \newline
      Critère d'application de l'algorithme :
      \begin{itemize}
        \item{Les éléments diagonaux ne peuvent être nuls,}
        \item{Le déterminant ne doit pas être nul.}
      \end{itemize}
        \lstset{language=C,showstringspaces=false}
      \subsection{Programme}
        \lstinputlisting[style=customc]{gauss.c}
      \newpage
      \subsection{Résultats des tests}
        \begin{tabular}{|c|c|c|c|}
           \hline
           Système & Résultat obtenu & Résultat théorique & Ecart \\ % ajout de hline entre chaque ligne pour séparer
           \hline
         \end{tabular}
        
        
    \newpage
    \section{Méthode de Cholesky}
      La méthode de Cholesky peut-être divisée en 2 étapes.
      \begin{enumerate}
        \item{On décompose la matrice}
      \end{enumerate}
      \subsection{Programme}
        \lstinputlisting[style=customc]{cholesky.c}
      \newpage
      \subsection{Résultats des tests}
      	
    \newpage
    \section{Comparaison}
    \newpage
     
  \chapter{Méthodes itératives}
  	\section{Méthode de Jacobi}
  	  \subsection{Programme}
        \lstinputlisting[style=customc]{jacobi.c}
      \newpage
      \subsection{Résultats des tests}
  	\newpage
  	\section{Méthode de Gauss-Seidel}
  	  \subsection{Programme}
        \lstinputlisting[style=customc]{gauss-seidel.c}
      \newpage
      \subsection{Résultats de tests}
  	\newpage
  	\section{Méthode de Sur-relaxation}
  	  \subsection{Programme}
        \lstinputlisting[style=customc]{surrelaxation.c}
      \newpage
      \subsection{Résultats de tests}
     \newpage
     \section{Comparaison}
  \chapter*{Conclusion}
  
\end{document}